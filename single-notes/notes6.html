<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>notes6</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="notes6"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2014-02-22T18:43-0800"/>
<meta name="author" content="michael"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  div.inlinetask {
    padding:10px;
    border:2px solid gray;
    margin:10px;
    background: #ffffcc;
  }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012  Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">notes6</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Lecture 6</a>
<ul>
<li><a href="#sec-1-1">MORE ARRAYS</a></li>
<li><a href="#sec-1-2">Automatic Array Construction</a></li>
<li><a href="#sec-1-3">MORE LOOPS</a>
<ul>
<li><a href="#sec-1-3-1">"do" Loops</a></li>
<li><a href="#sec-1-3-2">The "break" and "continue" Statements</a></li>
</ul>
</li>
<li><a href="#sec-1-4">CONSTANTS</a></li>
<li><a href="#sec-1-5">SCOPE</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Lecture 6</h2>
<div class="outline-text-2" id="text-1">

<p>Today's reading:  Sierra &amp; Bates pp. 282-285.
</p>
<p>
<a href="original-notes/06">original notes</a>
</p>
</div>

<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1">MORE ARRAYS</h3>
<div class="outline-text-3" id="text-1-1">

</div>

</div>

<div id="outline-container-1-2" class="outline-3">
<h3 id="sec-1-2">Automatic Array Construction</h3>
<div class="outline-text-3" id="text-1-2">

<p>Last lecture, we used a loop to construct all the arrays that the top-level
array references.  This was necessary to construct a triangular array.  But if
you want a rectangular multi-dimensional array, rather than a triangular one,
Java can construct all of the arrays for you at once.
</p>



<pre class="src src-java"><span style="color: #92a65e; font-weight: bold;">int</span>[][] <span style="color: #cae682;">table</span> = <span style="color: #8ac6f2; font-weight: bold;">new</span> <span style="color: #92a65e; font-weight: bold;">int</span>[x][y];
</pre>


<p>
This declaration constructs an array of x references to arrays.  It also
constructs x arrays of y ints.  The variable "table" references the array of
arrays; and each entry in the array of arrays references one of the arrays of
ints.  All the arrays are constructed for you at once.  Similarly, Java can
construct three- or ten-dimensional arrays for you, memory permitting.
</p>
<p>
We could have used a square array to store Pascal's Triangle, but that would
have unnecessarily wasted memory.  If you have enough memory, you might not
care.
</p>
<p>
When you declare a variable, you can also construct array entries by using
initializers.
</p>



<pre class="src src-java"><span style="color: #92a65e; font-weight: bold;">Human</span>[] <span style="color: #cae682;">b</span> = {amanda, rishi, <span style="color: #8ac6f2; font-weight: bold;">new</span> <span style="color: #92a65e; font-weight: bold;">Human</span>(<span style="color: #95e454;">"Paolo"</span>)};
<span style="color: #92a65e; font-weight: bold;">int</span>[][] <span style="color: #cae682;">c</span> = {{<span style="color: #ffa07a;">7</span>, <span style="color: #ffa07a;">3</span>, <span style="color: #ffa07a;">2</span>}, {x}, {<span style="color: #ffa07a;">8</span>, <span style="color: #ffa07a;">5</span>, <span style="color: #ffa07a;">0</span>, <span style="color: #ffa07a;">0</span>}, {y + z, <span style="color: #ffa07a;">3</span>}};
</pre>


<p>
In the second example, Java constructs a non-rectangular two-dimensional array,
composed of one array of arrays and four arrays of ints.
</p>
<p>
Sadly, you can only use this notation in a declaration.  You can't write
</p>



<pre class="src src-java">d = {<span style="color: #ffa07a;">3</span>, <span style="color: #ffa07a;">7</span>};                  <span style="color: #99968b;">// </span><span style="color: #99968b;">Compile-time ERROR.</span>
f({<span style="color: #ffa07a;">1</span>, <span style="color: #ffa07a;">2</span>, <span style="color: #ffa07a;">3</span>});                <span style="color: #99968b;">// </span><span style="color: #99968b;">Compile-time ERROR.</span>
</pre>


<p>
Another subtlety of array declarations is the following.
</p>



<pre class="src src-java"><span style="color: #92a65e; font-weight: bold;">int</span>[] <span style="color: #cae682;">a</span>, <span style="color: #cae682;">b</span>, <span style="color: #cae682;">c</span>;                           <span style="color: #99968b;">// </span><span style="color: #99968b;">a, b, and c all reference arrays.</span>
<span style="color: #92a65e; font-weight: bold;">int</span> <span style="color: #cae682;">a</span>[], <span style="color: #cae682;">b</span>, <span style="color: #cae682;">c</span>[][];           <span style="color: #99968b;">// </span><span style="color: #99968b;">a is 1D; c is 2D; b is not a reference/array.</span>
<span style="color: #92a65e; font-weight: bold;">int</span>[] <span style="color: #cae682;">a</span>, <span style="color: #cae682;">b</span>[];            <span style="color: #99968b;">// </span><span style="color: #99968b;">a references a 1D array; b references a 2D array.</span>
</pre>


<p>
Arrays of Objects

</p>
<hr/>
<p>
When you construct a multi-dimensional array, Java can construct all the arrays
for you.  But when you construct an array of objects, Java does not construct
the objects automatically.  The array contains space for references to the
objects.  You must construct the objects yourself.
</p>



<pre class="src src-java"><span style="color: #92a65e; font-weight: bold;">String</span>[] <span style="color: #cae682;">sentence</span> = <span style="color: #8ac6f2; font-weight: bold;">new</span> <span style="color: #92a65e; font-weight: bold;">String</span>[<span style="color: #ffa07a;">3</span>];
sentence[<span style="color: #ffa07a;">0</span>] = <span style="color: #95e454;">"Word"</span>;
sentence[<span style="color: #ffa07a;">2</span>] = <span style="color: #8ac6f2; font-weight: bold;">new</span> <span style="color: #92a65e; font-weight: bold;">String</span>();
</pre>



<p>
<img src="ditaa-images/TEMP_1_68926540f9653ecb7f25815a4e3e7c95190e99dc.png"  alt="ditaa-images/TEMP_1_68926540f9653ecb7f25815a4e3e7c95190e99dc.png" />
</p>

<p>
main()'s Parameter

</p>
<hr/>
<p>
What is the array of Strings that the main() method takes as a parameter?
It's a list of command-line arguments sent to your Java program, prepared for
you by Java.  Consider the following program.
</p>



<pre class="src src-java"><span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Echo</span> {
  <span style="color: #b0c4de;">public</span> <span style="color: #b0c4de;">static</span> <span style="color: #92a65e; font-weight: bold;">void</span> <span style="color: #cae682;">main</span>(<span style="color: #92a65e; font-weight: bold;">String</span>[] <span style="color: #cae682;">args</span>) {
    <span style="color: #8ac6f2; font-weight: bold;">for</span> (<span style="color: #92a65e; font-weight: bold;">int</span> <span style="color: #cae682;">i</span> = <span style="color: #ffa07a;">0</span>; i &lt; args.length; i++) {
      System.out.println(args[i]);
    }
  }
}
</pre>


<p>
If we compile this and type "java Echo kneel and worship Java", java prints
</p>

<p>
<img src="ditaa-images/TEMP_2_510aaafcf043f928583ecbe7b35d73e07475d85f.png"  alt="ditaa-images/TEMP_2_510aaafcf043f928583ecbe7b35d73e07475d85f.png" />
</p>
</div>

</div>

<div id="outline-container-1-3" class="outline-3">
<h3 id="sec-1-3">MORE LOOPS</h3>
<div class="outline-text-3" id="text-1-3">


</div>

<div id="outline-container-1-3-1" class="outline-4">
<h4 id="sec-1-3-1">"do" Loops</h4>
<div class="outline-text-4" id="text-1-3-1">

<p>A "do" loop has just one difference from a "while" loop.  If Java reaches
a "do" loop, it <span style="text-decoration:underline;">always</span> executes the loop body at least once.  Java doesn't
check the loop condition until the end of the first iteration.  "do" loops are
appropriate for any loop you always want executed at least once, especially if
the variables in the condition won't have meaningful assignments until the loop
body has been executed.
</p>



<pre class="src src-java"><span style="color: #8ac6f2; font-weight: bold;">do</span> {
  s = keybd.readLine();
  process(s);
} <span style="color: #8ac6f2; font-weight: bold;">while</span> (s.length() &gt; <span style="color: #ffa07a;">0</span>);               <span style="color: #99968b;">// </span><span style="color: #99968b;">Exit loop if s is an empty String.</span>
</pre>


</div>

</div>

<div id="outline-container-1-3-2" class="outline-4">
<h4 id="sec-1-3-2">The "break" and "continue" Statements</h4>
<div class="outline-text-4" id="text-1-3-2">


<p>
A "break" statement immediately exits the innermost loop or "switch" statement
enclosing the "break", and continues execution at the code following the loop
or "switch".
</p>
<p>
In the loop example above, we might want to skip "process(s)" when s is a
signal to exit (in this case, an empty String).  We want a "time-and-a-half"
loop&ndash;we want to enter the loop at a different point in the read-process cycle
than we want to exit the loop at.  Here are two alternative loops that do the
right thing.  They behave identically.  Each has a different disadvantage.
</p>



<pre class="src src-java">  s = keybd.readLine();                  |  <span style="color: #8ac6f2; font-weight: bold;">while</span> (<span style="color: #7fffd4;">true</span>) {       <span style="color: #99968b;">// </span><span style="color: #99968b;">Loop forever.</span>
  <span style="color: #8ac6f2; font-weight: bold;">while</span> (s.length() &gt; <span style="color: #ffa07a;">0</span>) {               |    s = keybd.readLine();
    process(s);                          |    <span style="color: #8ac6f2; font-weight: bold;">if</span> (s.length() == <span style="color: #ffa07a;">0</span>) {      
    s = keybd.readLine();                |      <span style="color: #8ac6f2; font-weight: bold;">break</span>;
  }                                      |    }                           
                                         |    process(s);
                                         |}
<span style="color: #99968b;">/*</span><span style="color: #99968b;">Disadvantage:  The line "s = keybd..." |</span>
<span style="color: #99968b;">is repeated twice.  It's not really      |</span>
<span style="color: #99968b;">a disadvantage here, but if input        | Disadvantage:  Somewhat obfuscated for </span>
<span style="color: #99968b;">took 100 lines of code, the              | the reader, because the loop isn't </span>
<span style="color: #99968b;">duplication would make the code harder   | aligned with its natural endpoint. </span>
<span style="color: #99968b;">to maintain.  Why?  Because a </span>
<span style="color: #99968b;">programmer improving the code might change one copy of the duplicated code </span>
<span style="color: #99968b;">without noticing the need to change the other to match.*/</span>
</pre>


<p>
Some loops have more than one natural endpoint.  Suppose we want to iterate the
read-process loop at most ten times.  In the example at left below, the "break"
statement cannot be criticized, because the loop has two natural endpoints.  We
could get rid of the "break" by writing the loop as at right below, but the
result is longer and harder to read.
</p>



<pre class="src src-java"><span style="color: #8ac6f2; font-weight: bold;">for</span> (<span style="color: #92a65e; font-weight: bold;">int</span> <span style="color: #cae682;">i</span> = <span style="color: #ffa07a;">0</span>; i &lt; <span style="color: #ffa07a;">10</span>; i++) {       |  <span style="color: #92a65e; font-weight: bold;">int</span> i = <span style="color: #ffa07a;">0</span>;
  s = keybd.readLine();              |  <span style="color: #8ac6f2; font-weight: bold;">do</span> {
  <span style="color: #8ac6f2; font-weight: bold;">if</span> (s.length() == <span style="color: #ffa07a;">0</span>) {             |    s = keybd.readLine();       
    <span style="color: #8ac6f2; font-weight: bold;">break</span>;                           |    <span style="color: #8ac6f2; font-weight: bold;">if</span> (s.length() &gt; <span style="color: #ffa07a;">0</span>) {             
  }                                  |      process(s);                      
  process(s);                        |    }
}                                    |    i++;
                                     |  } <span style="color: #8ac6f2; font-weight: bold;">while</span> ((i &lt; <span style="color: #ffa07a;">10</span>) &amp;&amp;
                                     |           (s.length() &gt; <span style="color: #ffa07a;">0</span>));
</pre>


<p>
There are anti-break zealots who claim that the loop on the right is the
"correct" way to do things.  I disagree, because the left loop is clearly more
readable.
</p>
<p>
Some of the zealots feel this way because "break" statements are a little bit
like the "go to" statements found in some languages like Basic and Fortran (and
the machine language that microprocessors really execute).  "go to" statements
allow you to jump to any line of code in the program.  It sounds like a good
idea at first, but it invariably leads to insanely unmaintainable code.  For
example, what happens if you jump to the middle of a loop?  Turing Award winner
Edsger Dijkstra wrote a famous article in 1968 entitled "Go To Statement
Considered Harmful", which is part of the reason why many modern languages like
Java don't have "go to" statements.
</p>
<p>
Both "break" and "return" are limited forms of "go to" statements.  Their
limitations prohibit the worst abuses of "go to".  They allow control flow to
jump in your program in ways that are straightforward to understand.
</p>
<p>
WARNING:  It's easy to forget exactly where a "break" statement will jump to.
For example, "break" does not jump to the end of the innermost enclosing "if"
statement.  An AT&amp;T programmer introduced a bug into telephone switching
software in a procedure that contained a "switch" statement, which contained an
"if" clause, which contained a "break", which was intended for the "if" clause,
but instead jumped to the end of the "switch" statement.  As a result, on
January 15, 1990, AT&amp;T's entire U.S. long distance service collapsed for eleven
hours.  (That code was actually written in C, but Java and C use identical
syntax and semantics for loops, "switch", and "break".)
</p>
<p>
The "continue" statement is akin to the "break" statement, except
(1) it only applies to loops, and
(2) it jumps to the end of the loop body but it doesn't necessarily exit the
    loop; another iteration will commence if the loop condition is satisfied.
</p>
<p>
Finally, I told you that "for" loops are identical to certain "while" loops,
but there's actually a subtle difference when you use "continue".  What's the
difference between the following two loops?
</p>



<pre class="src src-java"><span style="color: #92a65e; font-weight: bold;">int</span> <span style="color: #cae682;">i</span> = <span style="color: #ffa07a;">0</span>;                           | <span style="color: #8ac6f2; font-weight: bold;">for</span> (<span style="color: #92a65e; font-weight: bold;">int</span> <span style="color: #cae682;">i</span> = <span style="color: #ffa07a;">0</span>; i &lt; <span style="color: #ffa07a;">10</span>; i++) {
<span style="color: #8ac6f2; font-weight: bold;">while</span> (i &lt; <span style="color: #ffa07a;">10</span>) {                     |   <span style="color: #8ac6f2; font-weight: bold;">if</span> (condition(i)) {
  <span style="color: #8ac6f2; font-weight: bold;">if</span> (condition(i)) {                |     <span style="color: #8ac6f2; font-weight: bold;">continue</span>;
    <span style="color: #8ac6f2; font-weight: bold;">continue</span>;                        |   }
  }                                  |   call(i);
  call(i);                           | }
  i++;                               |
}                                    |
</pre>


<p>
Answer:  when "continue" is called in the "while" loop, "i++" is not executed.
In the "for" loop, however, i is incremented at the end of <span style="text-decoration:underline;">every</span> iteration,
even iterations where "continue" is called.
</p>
</div>
</div>

</div>

<div id="outline-container-1-4" class="outline-3">
<h3 id="sec-1-4">CONSTANTS</h3>
<div class="outline-text-3" id="text-1-4">


<p>
Java's "final" keyword is used to declare a value that can never be changed.
If you find yourself repeatedly using a numerical value with some "meaning" in
your code, you should probably turn it into a "final" constant.
</p>



<pre class="src src-java"><span style="color: #e5786d;">BAD</span>:     <span style="color: #8ac6f2; font-weight: bold;">if</span> (month == <span style="color: #ffa07a;">2</span>) {

<span style="color: #e5786d;">GOOD</span>:    <span style="color: #b0c4de;">public</span> <span style="color: #b0c4de;">final</span> <span style="color: #b0c4de;">static</span> <span style="color: #92a65e; font-weight: bold;">int</span> <span style="color: #cae682;">FEBRUARY</span> = <span style="color: #ffa07a;">2</span>;    <span style="color: #99968b;">// </span><span style="color: #99968b;">Usually near top of class.</span>

         ...

         <span style="color: #8ac6f2; font-weight: bold;">if</span> (month == <span style="color: #7fffd4;">FEBRUARY</span>) {
</pre>


<p>
Why?  Because if you ever need to change the numerical value assigned to
February, you'll only have to change one line of code, rather than hundreds.
</p>
<p>
You can't change the value of FEBRUARY after it is declared and initialized.
If you try to assign another value to FEBRUARY, you'll have a compiler error.
</p>
<p>
The custom of rendering constants in all-caps is long-established and was
inherited from C.  (The compiler does not require it, though.)
</p>
<p>
For any array x, "x.length" is a "final" field.
</p>
<p>
You can declare local parameters "final" to prevent them from being changed.
</p>



<pre class="src src-java"><span style="color: #92a65e; font-weight: bold;">void</span> <span style="color: #cae682;">myMethod</span>(<span style="color: #b0c4de;">final</span> <span style="color: #92a65e; font-weight: bold;">int</span> <span style="color: #cae682;">x</span>) {
  x = <span style="color: #ffa07a;">3</span>;                             <span style="color: #99968b;">// </span><span style="color: #99968b;">Compiler ERROR.  Don't mess with X's!</span>
}
</pre>


<p>
"final" is usually used for class variables (static fields) and parameters, but
it can be used for instance variables (non-static fields) and local variables
too.  It only makes sense for these to be "final" if the variable is declared
with an initializer that calls a method or constructor that doesn't always
return the same value.
</p>



<pre class="src src-java"><span style="color: #8ac6f2; font-weight: bold;">class</span> <span style="color: #92a65e; font-weight: bold;">Bob</span> {
  <span style="color: #b0c4de;">public</span> <span style="color: #b0c4de;">final</span> <span style="color: #92a65e; font-weight: bold;">long</span> <span style="color: #cae682;">creationTime</span> = System.currentTimeMillis();
}
</pre>


<p>
When objects of the Bob class are constructed, they record the time at that
moment.  Afterward, the creationTime can never be changed.
</p>
</div>

</div>

<div id="outline-container-1-5" class="outline-3">
<h3 id="sec-1-5">SCOPE</h3>
<div class="outline-text-3" id="text-1-5">


<p>
The <span style="text-decoration:underline;">scope</span> of a variable is the portion of the program that can access the
variable.  Here are some of Java's scoping rules.
</p>
<ul>
<li>Local variables and parameters are in scope only inside the method that
  declares them.  Furthermore, a local variable is in scope only from the
  variable declaration down to the innermost closing brace that encloses it.
  A local variable declared in the initialization part of a "for" loop is in
  scope only in the loop body.
</li>
<li>Class variables (static fields) are in scope everywhere in the class,
  except when shadowed by a local variable or parameter of the same name.
</li>
<li>Instance variables (non-static fields) are in scope in non-static methods
  of the class, except when shadowed.
</li>
</ul>

</div>
</div>
</div>
</div>

<div id="postamble">
<p class="date">Date: 2014-02-22T18:43-0800</p>
<p class="author">Author: michael</p>
<p class="creator"><a href="http://orgmode.org">Org</a> version 7.9.2 with <a href="http://www.gnu.org/software/emacs/">Emacs</a> version 24</p>
<a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a>

</div>
</body>
</html>
